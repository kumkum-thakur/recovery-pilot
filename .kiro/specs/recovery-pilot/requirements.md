# Requirements Document: RecoveryPilot

## Introduction

RecoveryPilot is an autonomous care orchestrator for post-operative recovery logistics. The system actively manages recovery tasks including appointment booking, medication ordering, and medical triage through AI-driven automation. Unlike passive telehealth applications, RecoveryPilot proactively handles logistics while providing gamified patient engagement and streamlined doctor workflows.

## Glossary

- **System**: The RecoveryPilot application
- **Patient**: A user recovering from surgery who interacts with the mobile-first dashboard
- **Doctor**: A healthcare provider who reviews and approves AI-generated action items
- **Mission**: A gamified recovery task presented to patients (e.g., wound photo upload, medication check)
- **Action_Item**: A task requiring doctor review, generated by AI analysis or patient requests
- **Triage_Analysis**: AI-powered assessment of wound photos categorizing healing status
- **Streak**: Consecutive days of mission completion tracked for gamification
- **Agent**: The AI system that processes requests and generates action items
- **Dashboard**: The primary interface for patients (mobile) or doctors (desktop)

## Requirements

### Requirement 1: Patient Authentication and Profile Management

**User Story:** As a patient, I want to securely log in and access my personalized recovery dashboard, so that I can manage my post-op care.

#### Acceptance Criteria

1. WHEN a patient provides valid credentials, THE System SHALL authenticate the user and display the patient dashboard
2. WHEN a patient provides invalid credentials, THE System SHALL reject authentication and display an error message
3. THE System SHALL store patient profile data including name, user ID, role designation, and streak count
4. WHEN a patient logs in, THE System SHALL retrieve and display their current streak count

### Requirement 2: Doctor Authentication and Profile Management

**User Story:** As a doctor, I want to securely log in and access my triage dashboard, so that I can review patient action items efficiently.

#### Acceptance Criteria

1. WHEN a doctor provides valid credentials, THE System SHALL authenticate the user and display the doctor dashboard
2. WHEN a doctor provides invalid credentials, THE System SHALL reject authentication and display an error message
3. THE System SHALL store doctor profile data including name, user ID, and role designation

### Requirement 3: Daily Mission Stream Display

**User Story:** As a patient, I want to see my recovery tasks presented as daily missions, so that I stay engaged with my recovery plan.

#### Acceptance Criteria

1. WHEN a patient accesses the dashboard, THE System SHALL display active missions in a prioritized stream format
2. THE System SHALL present each mission with a clear title, description, and action button
3. WHEN missions are displayed, THE System SHALL show mission status (pending, completed, or overdue)
4. THE System SHALL render the mission stream in a mobile-first responsive layout

### Requirement 4: Smart Action Button Behavior

**User Story:** As a patient, I want a context-aware action button that adapts to my current task, so that I can complete missions efficiently.

#### Acceptance Criteria

1. WHEN a mission requires photo upload, THE System SHALL display the action button as "Scan Incision"
2. WHEN a mission requires confirmation, THE System SHALL display the action button as "Mark Complete"
3. WHEN a mission requires external action, THE System SHALL display the action button with appropriate text for that action type
4. WHEN the action button is clicked, THE System SHALL execute the corresponding mission action

### Requirement 5: Wound Photo Capture and Upload

**User Story:** As a patient, I want to capture or upload photos of my incision, so that my doctor can monitor my healing progress.

#### Acceptance Criteria

1. WHEN a patient initiates photo capture, THE System SHALL provide camera access or file upload interface
2. WHEN a photo is captured or selected, THE System SHALL display a preview before submission
3. WHEN a patient confirms photo submission, THE System SHALL upload the image and initiate AI analysis
4. THE System SHALL support common image formats (JPEG, PNG, HEIC)

### Requirement 6: AI Visual Triage Analysis

**User Story:** As a patient, I want my wound photos automatically analyzed, so that potential issues are identified quickly.

#### Acceptance Criteria

1. WHEN a wound photo is uploaded, THE System SHALL process the image through AI triage analysis
2. WHEN analysis is complete, THE System SHALL categorize the result as Green (healing well) or Red (risk detected)
3. WHEN the result is Green, THE System SHALL display positive feedback and care instructions
4. WHEN the result is Red, THE System SHALL create an action item for doctor review and notify the patient
5. THE System SHALL store the AI confidence score with each triage analysis

### Requirement 7: Agentic Workflow & External Simulation

**User Story:** As a patient, I want to see the Agent "working" on my behalf (checking insurance, checking inventory) so I feel taken care of.

#### Acceptance Criteria

1. WHEN a Red triage result occurs, THE Agent SHALL trigger a multi-step simulation:
    * Step 1: "Analyzing Image..." (1s delay)
    * Step 2: "Drafting Clinical Note..." (1s delay)
    * Step 3: "Creating Appointment Slot..." (1s delay)
2. WHEN a Medication Refill is requested, THE Agent SHALL trigger:
    * Step 1: "Checking Pharmacy Inventory (Mock API)..." (Result: In Stock)
    * Step 2: "Verifying Insurance Coverage..." (Result: Approved)
    * Step 3: "Order Placed."
3. THE System SHALL display these steps visually in a "Status Log" toast or card, so the user sees the work being done.

### Requirement 8: Doctor Triage Inbox Display

**User Story:** As a doctor, I want to see a prioritized inbox of action items requiring my attention, so that I can efficiently review patient needs.

#### Acceptance Criteria

1. WHEN a doctor accesses the dashboard, THE System SHALL display all pending action items in priority order
2. THE System SHALL show action item details including patient name, request type, and AI-generated context
3. WHEN displaying refill requests, THE System SHALL show insurance verification status and inventory availability
4. WHEN displaying triage items, THE System SHALL show the wound photo, AI analysis, and confidence score

### Requirement 9: Doctor Action Item Review and Approval

**User Story:** As a doctor, I want to quickly approve or reject action items with one click, so that I can process patient requests efficiently.

#### Acceptance Criteria

1. WHEN a doctor views an action item, THE System SHALL display Approve and Reject buttons
2. WHEN a doctor clicks Approve, THE System SHALL update the action item status to approved and notify the patient
3. WHEN a doctor clicks Reject, THE System SHALL update the action item status to rejected and prompt for rejection reason
4. THE System SHALL record the doctor's decision timestamp and reasoning

### Requirement 10: Gamification Streak Tracking

**User Story:** As a patient, I want to earn streaks for completing daily missions, so that I stay motivated in my recovery.

#### Acceptance Criteria

1. WHEN a patient completes all daily missions, THE System SHALL increment their streak count by one
2. WHEN a patient misses a day of missions, THE System SHALL reset their streak count to zero
3. THE System SHALL display the current streak count prominently on the patient dashboard
4. THE System SHALL persist streak data across sessions

### Requirement 11: Themed Gamification & "Recovery Buddy"

**User Story:** As a patient, I want the app to feel like a friendly companion rather than a sterile medical tool.

#### Acceptance Criteria

1. **Visual Theme:** The interface SHALL use a "Friendly Companion" motif. Success states should use playful animations (e.g., a character giving a thumbs up) rather than just checkmarks.
2. **Tone of Voice:** System notifications SHALL use encouraging, slightly humorous text (e.g., "You crushed that pill schedule! ðŸ’Š" or "Incision looking sharp! (Not literally) âœ¨").
3. **Streak Celebration:** WHEN a streak milestone is hit, THE System SHALL trigger a full-screen "Confetti" effect.

### Requirement 12: Data Persistence and State Management

**User Story:** As a user, I want my data saved reliably, so that I don't lose progress or important information.

#### Acceptance Criteria

1. THE System SHALL persist user profile data to the database immediately upon changes
2. THE System SHALL persist action items to the database immediately upon creation or status change
3. THE System SHALL persist mission completion status to the database immediately upon completion
4. WHEN using LocalStorage for MVP, THE System SHALL serialize and store data in valid JSON format

### Requirement 13: Responsive Mobile-First Design

**User Story:** As a patient, I want the app to work seamlessly on my phone, so that I can manage my recovery on the go.

#### Acceptance Criteria

1. THE System SHALL render the patient dashboard optimized for mobile viewport sizes (320px to 768px)
2. THE System SHALL use touch-friendly interactive elements with minimum 44px tap targets
3. WHEN the viewport is resized, THE System SHALL adapt layout without horizontal scrolling
4. THE System SHALL render text at readable sizes (minimum 16px for body text)

### Requirement 14: Desktop Doctor Dashboard Layout

**User Story:** As a doctor, I want a desktop-optimized dashboard, so that I can efficiently review multiple action items.

#### Acceptance Criteria

1. THE System SHALL render the doctor dashboard optimized for desktop viewport sizes (1024px and above)
2. THE System SHALL display action items in a multi-column layout when screen space allows
3. THE System SHALL provide keyboard navigation shortcuts for common actions
4. THE System SHALL maintain readability and usability on screens from 1024px to 4K resolution

### Requirement 15: "Demo Mode" Configuration

**User Story:** As a presenter, I want to force specific scenarios (e.g., "Force Infection Detected") so I can reliably demonstrate the AI features to judges.

#### Acceptance Criteria

1. The System SHALL include a hidden "Debug Menu" or simple toggle in the code to switch between Scenarios:
    * `SCENARIO_HAPPY_PATH`: All uploads = Green/Healthy, Insurance = Approved.
    * `SCENARIO_RISK_DETECTED`: Next upload = Red/Infected, triggers Doctor Triage.
2. The Mock AI Service SHALL respect the active Scenario flag to ensure deterministic behavior during the presentation.

## Technical Implementation Constraints

### Constraint 1: Frontend Architecture
**Restriction:** The System MUST be built using **React (Vite)** with **Tailwind CSS**.
**Restriction:** All state management (User Session, Task List, Agent Status) MUST use **Zustand**. Context API should only be used for theming if necessary.
**Restriction:** UI Icons MUST utilize the `lucide-react` library.

### Constraint 2: "Agent" Simulation Logic
**Restriction:** The "Backend" logic MUST be simulated using a localized Service Layer (Mock Service) that returns Promises with delays (simulating API latency).
**Requirement:** The Agent logic must be separated from UI components (e.g., `useAgentStore` hook).